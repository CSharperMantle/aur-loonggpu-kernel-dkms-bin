From 6c0deeaacb0e27cd0df8ce812f2bf43e297b55c5 Mon Sep 17 00:00:00 2001
From: Xi Ruoyao <xry111@xry111.site>
Date: Sat, 3 Jan 2026 15:38:35 +0800
Subject: [PATCH 61/63] loonggpu: handle the rename of ttm_bo_put to
 ttm_bo_fini

Link: https://git.kernel.org/torvalds/c/ed7a4397f55b
Signed-off-by: Xi Ruoyao <xry111@xry111.site>
---
 loonggpu/loonggpu_gem.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/loonggpu/loonggpu_gem.c b/loonggpu/loonggpu_gem.c
index b441934..79f419b 100644
--- a/loonggpu/loonggpu_gem.c
+++ b/loonggpu/loonggpu_gem.c
@@ -81,7 +81,11 @@ void loonggpu_gem_object_free(struct drm_gem_object *gobj)
 
 	if (robj) {
 		loonggpu_mn_unregister(robj);
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 19, 0)
+		ttm_bo_fini(&robj->tbo);
+#else
 		ttm_bo_put(&robj->tbo);
+#endif
 	}
 }
 
-- 
2.52.0

