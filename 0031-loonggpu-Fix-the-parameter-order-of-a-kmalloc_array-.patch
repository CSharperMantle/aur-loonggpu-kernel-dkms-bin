From 0c9f6f1a16efff6fa92a769bcbc0a8a1bf2694fb Mon Sep 17 00:00:00 2001
From: Xi Ruoyao <xry111@xry111.site>
Date: Tue, 24 Jun 2025 14:26:21 +0800
Subject: [PATCH 31/63] loonggpu: Fix the parameter order of a kmalloc_array
 call

The element size should be the second parameter.

Signed-off-by: Xi Ruoyao <xry111@xry111.site>
---
 loonggpu/loonggpu_ids.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/loonggpu/loonggpu_ids.c b/loonggpu/loonggpu_ids.c
index d680841..d53ee33 100644
--- a/loonggpu/loonggpu_ids.c
+++ b/loonggpu/loonggpu_ids.c
@@ -183,7 +183,7 @@ static int loonggpu_vmid_grab_idle(struct loonggpu_vm *vm,
 	if (ring->vmid_wait && !dma_fence_is_signaled(ring->vmid_wait))
 		return loonggpu_sync_fence(adev, sync, ring->vmid_wait, false);
 
-	fences = kmalloc_array(sizeof(void *), id_mgr->num_ids, GFP_KERNEL);
+	fences = kmalloc_array(id_mgr->num_ids, sizeof(void *), GFP_KERNEL);
 	if (!fences)
 		return -ENOMEM;
 
-- 
2.52.0

